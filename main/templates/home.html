<!DOCTYPE html>
{% load static %}
{% csrf_token %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monopoly Online</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>
<body>
    <div class="right-menu">
        <div class="titles-and-errors">
            <div class="title" id="title">
                List of ongoing games
            </div>
            <div class="message hidden" id="messageNotif">
                
            </div>
        </div>
        <div class="party-user">
            <div class="party-container">
                <!-- party creation -->
                <div class="party-creation-menu hidden" id="party-creation-menu">
                    <div class="menu-fields">
                        <label for="party-name-input">Party Name</label>
                        <input type="text" id="party-name-input" placeholder="Enter a party name">
                        
                        <label for="max-players-input">Max Players (2-6)</label>
                        <input type="number" id="max-players-input" value="4" min="2" max="8">
                        
                        <div id="creation-message" class="message-area"></div>

                        <button id="submit-create-party-btn" class="action-btn rename-btn">Create Party</button>
                        <button id="cancel-creation-btn" class="action-btn cancel-btn">Cancel</button>
                    </div>
                </div>
                <!-- party lobby -->
                <div class="party-lobby-menu hidden" id="party-lobby-menu">
                    <div class="party-info" id="party-info">Party Name | CODE</div>
                    <div class="party-lobby-header">
                        <div class="party-members-list" id="party-members-list">
                            <!-- Member items will be rendered here -->
                        </div>
                        <div class="character-select" id="character-select">
                            <h3>Choose your character</h3>
                            <div class="character-grid">
                                <button class="character-btn" data-character="1">1</button>
                                <button class="character-btn" data-character="2">2</button>
                                <button class="character-btn" data-character="3">3</button>
                                <button class="character-btn" data-character="4">4</button>
                                <button class="character-btn" data-character="5">5</button>
                                <button class="character-btn" data-character="6">6</button>
                                <button class="character-btn" data-character="7">7</button>
                                <button class="character-btn" data-character="8">8</button>
                            </div>
                        </div>
                        <div class="party-lobby-buttons">
                            <button id="start-game-btn" class="start-game-btn">Start (Host only)</button>
                            <button id="ready-party-btn" class="ready-party-btn">Ready</button>
                            <button id="leave-party-btn" class="leave-party-btn">Leave</button>
                        </div>
                    </div>
                    <div class="chat-message-area" id="chat-message-area">
                        <div class="chat-messages" id="chat-messages">
                            <!-- Messages appear here -->
                        </div>
                        <div class="chat-input-container">
                            <input type="text" id="chat-input" class="chat-input" placeholder="Type a message...">
                            <button id="send-chat-btn" class="send-chat-btn">Send</button>
                        </div>
                    </div>
                </div>
                <!-- party list -->
                <div id="party-list-menu">
                    <div class="create-join">
                        <div class="lovely-buttons" id="joinCreateCont">
                            <button class="party-btn create-btn" id="create-party-btn">
                                Create a game
                            </button>
                            <button class="join-btn hidden" id="join-party-btn" disabled>
                                Join party
                            </button>
                        </div>
                        <input type="text" id="join-code-input" placeholder="...or join an existing one (enter code)" class="join-field" maxlength="6">
                    </div>
                    <div class="parties" id="parties"> 
                        <!-- shows list of public parties -->
                    </div>
                </div>
            </div>
            <!-- user creation section -->
            <div class="user-container" id="user-container">
                <!-- Pass the current session username value to JS for prefilling -->
                <input 
                    type="text" 
                    id="username-input"
                    class="username-input"
                    placeholder="Choose your nickname" 
                >
                <button id="create-user-btn" class="create-user-btn">Set name</button>
                
                <div id="current-name-display" class="mt-4">
                    WHY HELLO THERE {{ player_uuid }}
                </div>
            </div>
            <!-- end of user creation section -->
        </div>
    </div>
    <script>
        window.PLAYER_UUID = "{{ player_uuid }}";
    </script>
    <script type="module" src="{% static 'js/main.js' %}"> defer</script>
</body>
</html>

