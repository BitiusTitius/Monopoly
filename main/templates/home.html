<!DOCTYPE html>
{% load static %}
{% csrf_token %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monopoly Online</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>
<body>
    <div class="right-menu">
        <div class="titles-and-errors">
            <div class="title" id="title">
                List of ongoing games
            </div>
            <div class="errors hidden" id="errors">
                
            </div>
        </div>
        <div class="party-user">
            <div class="party-container">
                <!-- party creation -->
                <div class="party-creation-menu hidden" id="party-creation-menu">
                    <div class="menu-fields">
                        <label for="party-name-input">Party Name</label>
                        <input type="text" id="party-name-input" placeholder="Enter a party name">
                        
                        <label for="max-players-input">Max Players (2-6)</label>
                        <input type="number" id="max-players-input" value="4" min="2" max="6">
                        
                        <div id="creation-message" class="message-area"></div>

                        <button id="submit-create-party-btn" class="action-btn rename-btn">Create Party</button>
                        <button id="cancel-creation-btn" class="action-btn cancel-btn">Cancel</button>
                    </div>
                </div>
                <!-- party lobby -->
                <div class="party-lobby-menu hidden" id="party-lobby-menu">
                    <h2 id="party-name-code">Party name | Party code</h2>

                    <div id="party-members-list">
                        <!-- shows list of party members-->
                    </div>
                    
                    <p id="party-player-count">0/0 Players</p>

                    <button id="start-game-btn" class="start-game-btn">Start Game (Host Only)</button>
                    <button id="leave-party-btn" class="leave-party-btn">Leave Party</button>
                </div>
                <!-- party list -->
                <div id="party-list-menu">
                    <div class="create-join">
                         <div class="lovely-buttons" id="joinCreateCont">
                            <button class="party-btn create-btn" id="create-party-btn">
                                Create a game
                            </button>
                            <button class="join-btn hidden" id="join-party-btn" disabled>
                                Join party
                            </button>
                        </div>
                        <input type="text" id="join-code-input" placeholder="...or join an existing one (enter code)" class="join-field" maxlength="6">
                    </div>
                    <div class="parties" id="parties"> 
                        <!-- shows list of public parties -->
                    </div>
                </div>
            </div>
            <!-- user creation section -->
            <div class="user-container" id="user-container">
                <p id="greet-user">Hello!</p>
                <!-- Pass the current session username value to JS for prefilling -->
                <input 
                    type="text" 
                    id="username-input"
                    class="username-input"
                    placeholder="Choose your nickname" 
                >
                <button id="create-user-btn" class="create-user-btn">Set name</button>
                
                <div id="current-name-display" class="mt-4">
                    {{ player_uuid }}
                </div>
            </div>
            <!-- end of user creation section -->
        </div>
    </div>
    <script>
        window.PLAYER_UUID = "{{ player_uuid }}";
    </script>
    <script type="module" src="{% static 'js/main.js' %}"> defer</script>
</body>
</html>

